---
title: "data"
author: "simplymathematics"
date: "October 27, 2018"
output: html_document
---

# Project 2
## Setup
We decided to break this problem into pieces, each of which has it's own R file, data source, and folder in this repository. We're going to start off by loading all of the files so that we can look at the data. 

### Dependencies
TODO: Gather dependencies here so that uninstalled libraries don't break the automation.


```{r}
suppressWarnings(source("outlook/outlook.R"))
suppressWarnings(source("onet/skills.R"))
suppressWarnings(source("salary/dollars-scrape.R"))
suppressWarnings(source("indeed/Indeed_Skills.R"))
```

Good, now that's that is done, let's look at each data source. 

## Overview of Data

**TODO: RAVI - Add description of what you did on indeed**

For our project, we choose to analyze data from the U.S. Department of Labor (DOL), Bureau of Labor Statistics (BLS). We used the BLS Occupational Employment Survey (OES) to obtain 2017 wage data and the 2016 Employment Projection (EP) to obtain worker characteristics of Computer and Mathematical Occupations. 
  
Federal statistical agencies, like the BLS, rely on the [STANDARD OCCUPATIONAL CLASSIFICATION MANUAL](https://www.bls.gov/soc/2018/soc_2018_manual.pdf) to classify occupations based on their specific duties performed. The manual is updated periodically to capture changes in type of work performed in the broader U.S. economy. In 2018. the SOC manual added the occupation 15-2051 Data Scientists. However, this SOC code has not yet been made available in published BLS data we used for our project. Prior to 2018, BLS classified Data Scientist jobs in codes designated for statistician and computer programmers, among other occupations in the 15 series, based on the primary task of the analyzed job. For this reason, we choose to broadly examine skills and characteristics at the 6 digit level of the entire 15 series for Computer and Mathematical Occupations.  

Additionally, we used a DOL sponsered progrm, Occupational Information Network (O`*`NET), to obtain occupational skills data from the online repository known as the [O*NET Resource Center](https://www.onetcenter.org/). The data relies on the same SOC code, which we later used to create a relational database of our data.

Lastly, we wanted to examine which skills are currently being sought after in today's labor Market. 


## Worker Characteristics  

First, we consulted with the BLS Employment Projections to obtain data related to the 2016-26 [Occupational Projections and Worker Characteristics](https://www.bls.gov/emp/tables/occupational-projections-and-characteristics.htm). After scraping and cleaning the data (as seen in the .r file in the corresponding folder), we were able to look at some long-term job characteristics across the mathematical and computational sectors. For now, suffice it to say that the vast majority of these jobs appear to be entry level as shown by the graph below

```{r}
outlook.graphic
```
Additionally, we saw that the vast majority of these jobs require at least some kind of four-year degree, with considerably opportunities for those with higher educations.
```{r}
outlook.graphic2
```
We will come back to this data set later, but for now, we'll take a look at some numbers.

## Salary  

We took the same list of mathematical occupations and used [Occupational Employment Statistics](https://www.bls.gov/oes/current/oes150000.htm) data to find the salary data for each.  

We had to drop the dollar signs and commas from the numbers to do this analysis.

```{r}
head(salary.frame, 5)
```

The mean and standard deviation are given below. As we can see, the average mathematician makes $92,400/year, but there is significant deviation amongst occupations.

```{r}
mean(as.numeric(salary.frame$Mean.Annual.Wage))
sd(as.numeric(salary.frame$Mean.Annual.Wage))
```
Additionally, there is considerable room for advancement as Computer and Research Scientists make $120,000 a year on average! 
```{r}
best_pay <-  max(as.numeric(salary.frame$Mean.Annual.Wage))
best_pay
```
Naturally, our next question was centered on which skills we would need to get those top-paying positions.

## Skills  

For this, we used the [O*NET Database](https://www.onetcenter.org/database.html?p=3) to examine the skills required by the Computer and Mathematical Occupations. The data is scaled on on a level 0-7, and marks the importance of each skillset. After some scraping and cleaning, the data can be seen below.

```{r}
head(skills.frame,5)
```
Then, we found the tops skills across occupations by taking the average of each column. Below are the top 5 skills for mathematical and computational occupations

```{r}
skills.top
```
Finally, we wanted to see a couple more things. In particular, we want to see what skills are required for the highest paying data science jobs.

## Salary vs. Outlook

Now, we'll look at  a scatter plot of salarys and outlooks. 
```{r}
salary.vs.outlook <- na.omit(merge(salary.frame, outlook.frame, by = 'SOC', all = TRUE))
dollars <- as.numeric(salary.vs.outlook$Mean.Annual.Wage)
jobs <- as.numeric(salary.vs.outlook$`2016-26_AvgAnnual_OccOpenings`)
df <- data.frame(cbind(dollars,jobs))
ggplot(df, aes(x=dollars, y=jobs)) + geom_point() 
```
What's interesting about this graph is that is shows a weak correlation between salary and job sector growth.


## Skills List
We turned these categorical skills into specific, technical ones using data from...

TODO: JUN and Gracie's Section

## Indeed.com
Finally, we scraped Indeed with the above list of skills to see how often each came up for positions called "Data Scientist." Then, we compared New York to California. We chose these two states to get a wide swath of the industry without relying on scraping even more Indeed pages. Below are the top job skills for California.

```{r}
head(job_listings_keyword_count_ca,5)
bplotCA
```
We have the same data here for New York
```{r}
head(job_listings_keyword_count_ny,5)
bplotNY
```

# TODO: Turn these into SQL databases
 + skills.frame
 + outlook.frame
 + salary.frame
 + indeed.ca.frame
 + indeed.ny.frame
